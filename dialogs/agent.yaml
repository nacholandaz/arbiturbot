initial_user_message:
    type: 'text'
    text: 'User generated text'
    next_interaction: start

start:
    type: 'text'
    text: 'Hola, ${name}. Soy Arbi ðŸ¤–'
    requires_user_response: 'false'
    next_interaction: 'know_abilities'

know_abilities:
    type: 'text'
    text: 'Escribe "?" para conocer mis habilidades.'
    requires_user_response: 'false'
    next_interaction: 'cui'
    save_field_context:
        field: conversational_level
        value: general

cui:
    type: 'conversational_interface'
    requires_user_response: 'true'
    available_commands: {
        '+u':  'add_user',
        #'ls': list,
        'u': 'list_users',
        'u.': 'switch_user',
        '?': 'get_help',
    }
    next_interaction_failure: error_command

error_command:
    type: 'text'
    text: "Comando no encontrado, Intenta de nuevo. Utiliza *?* para conocer los comandos disponibles."
    requires_user_response: 'false'
    next_interaction: 'cui'

add_user:
    type: 'pre_register_user'
    requires_user_response: 'false'
    next_interaction: register_user
    syntax_error: register_syntax_error

register_user:
    type: 'register_user'
    requires_user_response: 'false'
    next_interaction: cui

register_syntax_error:
    type: 'text'
    text: "Puedes mandar el contacto directo o escribe esto\n+u Loya Macuarra (812345678)"
    requires_user_response: 'false'
    next_interaction: 'cui'

list_users:
    type: list_users
    text: "Seleciona un usuario:"
    requires_user_response: 'false'
    next_interaction: cui

switch_user:
    type: switch_user
    requires_user_response: 'false'
    next_interaction: cui

get_help_user:
    type: 'text'
    text: "+u - generar usuario\nu - moverse a un usuario\nls u  - listar usuarios\nu. - switch user"
    requires_user_response: 'false'
    next_interaction: user_interface
